<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">
	<head>
	
	<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W99CWL1C9H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W99CWL1C9H');
</script>
		<title>My blog | xworkflows</title>
		<meta charset="utf-8" />
		<meta name="description" content="xworkflows">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="/assets/css/main.css" />
		<noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
	</head>

	<body class="is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header">
						<h3><a href="/index.html">My blog</a></h3>
						<nav>
							<a href="#menu">Menu</a>
						</nav>
					</header>

				<!-- Menu -->
				
				<!-- Menu -->
					<nav id="menu">
						<div class="inner">
							<h2>Menu</h2>
							<ul class="links">
								
									<li><a href="/index.html">Home</a></li>
								
									<li><a href="/archive.html">Archive</a></li>
								
									<li><a href="/tags.html">Tags</a></li>
								
									<li><a href="/projects.html">projects</a></li>
								
									<li><a href="/about.html">About me</a></li>
								
							</ul>
							<a href="#" class="close">Close</a>
						</div>
					</nav>


				<!-- Wrapper -->
					<section id="wrapper">
						<header>
							<div class="inner">
								<h2>xworkflows</h2>
							</div>
						</header>

						<!-- Content -->
							<div class="wrapper">
								<div class="inner">

									<p><a href="index.html">Introduction</a><br>
<a href="installation.html">Installation</a><br>
<a href="basic.html">Basic concepts</a><br>
<a href="starting.html">Getting Started</a><br>
<a href="entities.html">Entities</a><br>
<a href="actions.html">Actions</a><br>
<a href="events.html">Events</a><br>
<a href="workflow.html">Workflow</a><br>
<a href="errors.html">Error handling</a><br>
<a href="advanced.html">Advanced usage</a><br>
<a href="examples.html">Examples</a><br></p>
<h1 id="actions">Actions</h1>
<p>Actions in XWorkflows represent specific operations that trigger state transitions for entities. When an action is executed, it performs tasks and updates the state of the entity accordingly. To work with actions in XWorkflows, you need to define custom action classes and integrate them into the relevant workflows.</p>
<h2 id="creating-custom-actions">1. Creating Custom Actions</h2>
<p>To create a custom action, you'll need to define a class that inherits from MyWorkflowAction. This class should be parameterized with the appropriate types, depending on the action's behavior. Let's take an example of the SubmitOrderAction, which triggers the transition of an order from the Created state to the Submitted state:</p>
<pre><code class="language-csharp">public class SubmitOrderActionRequest
{
    // Define any properties related to the action request, if needed
}

public class SubmitOrderEvent : MyWorkflowEvent&lt;SubmitOrderActionRequest&gt;
{
    public override Task Execute(SubmitOrderActionRequest data, CancellationToken cancellationToken)
    {
        // Implement any post-action logic here (optional)
        return Task.CompletedTask;
    }
}

public class SubmitOrderAction : MyWorkflowAction&lt;SubmitOrderEvent, SubmittedState, SubmitOrderActionRequest, SubmitOrderActionRequest, bool&gt;
{
    protected SubmitOrderAction(SubmittedState state, SubmitOrderEvent e) : base(state, e)
    {
    }

    public override Task&lt;(WorkflowActionResult&lt;bool&gt;, SubmitOrderActionRequest)&gt; Execute(OrderEntity data, SubmitOrderActionRequest p, CancellationToken cancellationToken)
    {
        // Implement the action logic here
        // For example, update the order's state to Submitted and perform other tasks

        data.State = State.Submitted;
        return Task.FromResult((WorkflowActionResult&lt;bool&gt;.Succeeded(true), p));
    }
}
</code></pre>
<p>In this example, we have created the SubmitOrderAction, which inherits from MyWorkflowAction. The action is parameterized with the SubmitOrderEvent, SubmittedState, SubmitOrderActionRequest, SubmitOrderActionRequest, and bool types. The Execute method contains the logic for the action, updating the entity's state and performing any other necessary tasks.</p>
<h2 id="using-actions-in-workflows">2. Using Actions in Workflows</h2>
<p>To use actions in your workflows, you need to create a custom workflow class that inherits from WorkflowBase&lt;TWorkflow, TEntity, TState&gt;. Then, you can register the relevant actions for your entity within the workflow's constructor.</p>
<pre><code class="language-csharp">public class OrderWorkflow : WorkflowBase&lt;OrderWorkflow, OrderEntity, State&gt;
{
    public OrderWorkflow(IEnumerable&lt;IWorkflowOwner&lt;OrderWorkflow&gt;&gt; actions) : base(actions)
    {
    }
}
</code></pre>
<p>XWorkflows use dependency injection to register workflow related classes. In your Program.cs your should invoke method RegisterWorkflows.</p>
<p>In this example, OrderWorkflow extends WorkflowBase and registers the SubmitOrderAction and CancelOrderAction for the OrderEntity workflow.</p>
<h2 id="execution-and-error-handling">3. Execution and Error Handling</h2>
<p>To execute an action on an entity, simply call the ExecuteAction method on the corresponding workflow instance:</p>
<pre><code class="language-csharp">// Assuming you have an instance of the OrderWorkflow
var orderWorkflow = new OrderWorkflow(actions);

// Create an instance of the OrderEntity
var order = new OrderEntity { /* Initialize properties */ };

// Execute the SubmitOrderAction
var submitRequest = new SubmitOrderActionRequest { /* Request data, if needed */ };
var (result, response) = await orderWorkflow.ExecuteAction(order, submitRequest);
</code></pre>
<p>XWorkflows takes care of error handling when an action is executed without permission to transition the entity to a desired state or if the action fails. It will throw an exception with a meaningful error message, guiding you to resolve the issue.</p>


								</div>
							</div>

					</section>

				<!-- Footer -->
					<section id="footer">
						<div class="inner">							
							<ul class="copyright">
								<li>Copyright Â© 2023</li>
								<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>
					</section>

			</div>

		<!-- Scripts -->
					<script src="/assets/js/jquery.min.js"></script>
			<script src="/assets/js/jquery.scrollex.min.js"></script>
			<script src="/assets/js/browser.min.js"></script>
			<script src="/assets/js/breakpoints.min.js"></script>
			<script src="/assets/js/util.js"></script>
			<script src="/assets/js/main.js"></script>

	</body>
</html>